import{a as J}from"./chunk-PLXHDNC7.js";import{d as j}from"./chunk-K6BAALZU.js";import{a as q}from"./chunk-PNRCHS3F.js";import{b as H,c as B,f as P,i as U,j as z,k as G,n as W}from"./chunk-GT7YRUEU.js";import{Ca as F,Kb as R,Lb as L,Qa as N,Ra as u,Sa as f,Ta as A,Ua as T,Va as b,X as D,Xa as t,Y as M,Ya as n,Z as p,Za as c,_ as h,bb as k,cb as g,db as m,ea as S,hb as w,ib as a,jb as v,kb as x,lb as I,mb as _,nb as E,ob as C,qb as V,rb as O,sa as l,wa as y}from"./chunk-5P4XIA3I.js";var K=(o,i)=>i.id;function Q(o,i){if(o&1&&(t(0,"span"),a(1),n()),o&2){let e=m().$implicit,r=m();l(),I("P\xE9riode: ",r.formatDate(e.dateDebut)," - ",r.formatDate(e.dateFin))}}function X(o,i){if(o&1&&(t(0,"span"),a(1),V(2,"number"),n()),o&2){let e=m().$implicit;l(),x("Montant: ",O(2,1,e.montant,"1.0-0")," FCFA")}}function Y(o,i){if(o&1&&(t(0,"div",34)(1,"p",38),a(2,"Commentaire RH:"),n(),t(3,"p",39),a(4),n()()),o&2){let e=m().$implicit;l(4),v(e.commentaireRH)}}function Z(o,i){if(o&1&&(t(0,"span",42),p(),t(1,"svg",43),c(2,"path",44),n(),a(3),n()),o&2){let e=i.$implicit;l(3),x(" ",e," ")}}function ee(o,i){if(o&1&&(t(0,"div",35)(1,"p",40),a(2,"Documents joints:"),n(),t(3,"div",41),T(4,Z,4,1,"span",42,A),n()()),o&2){let e=m().$implicit;l(4),b(e.documents)}}function te(o,i){if(o&1){let e=k();t(0,"button",45),g("click",function(){D(e);let s=m().$implicit,d=m();return M(d.annulerDemande(s))}),p(),t(1,"svg",29),c(2,"path",46),n()()}}function ne(o,i){if(o&1&&(t(0,"div",24)(1,"div",26)(2,"div",27)(3,"div",28)(4,"div"),p(),t(5,"svg",29),c(6,"path",30),n()(),h(),t(7,"div",27)(8,"h3",31),a(9),n(),t(10,"p",32),a(11),n(),t(12,"div",33)(13,"span"),a(14),n(),t(15,"span"),a(16),n(),u(17,Q,2,2,"span"),u(18,X,3,4,"span"),n(),u(19,Y,5,1,"div",34),u(20,ee,6,0,"div",35),n()()(),t(21,"div",36)(22,"span"),a(23),n(),u(24,te,3,0,"button",37),n()()()),o&2){let e=i.$implicit,r=m();l(4),w(r.getTypeIcon(e.type).class),l(2),N("d",r.getTypeIcon(e.type).path),l(3),v(e.titre),l(2),v(e.description),l(3),x("Type: ",r.getTypeLabel(e.type)),l(2),x("Cr\xE9\xE9 le: ",r.formatDate(e.dateCreation)),l(),f(e.dateDebut&&e.dateFin?17:-1),l(),f(e.montant?18:-1),l(),f(e.commentaireRH?19:-1),l(),f(e.documents&&e.documents.length>0?20:-1),l(2),w(r.getStatutClass(e.statut)),l(),x(" ",r.getStatutLabel(e.statut)," "),l(),f(e.statut==="EN_ATTENTE"?24:-1)}}function ie(o,i){o&1&&(t(0,"div",25),p(),t(1,"svg",47),c(2,"path",44),n(),h(),t(3,"h3",48),a(4,"Aucune demande trouv\xE9e"),n(),t(5,"p",49),a(6,"Commencez par cr\xE9er votre premi\xE8re demande."),n(),t(7,"div",50)(8,"a",51),a(9," Cr\xE9er une demande "),n()()())}var $=class o{constructor(i,e){this.demandeService=i;this.authService=e}demandes=S([]);demandesFiltrees=S([]);filtreStatut="";filtreType="";rechercheTexte="";ngOnInit(){this.chargerDemandes()}chargerDemandes(){let i=this.authService.getCurrentUser();i&&this.demandeService.getDemandesByEmploye(i.id).subscribe(e=>{this.demandes.set(e),this.appliquerFiltres()})}appliquerFiltres(){let i=this.demandes();if(this.filtreStatut&&(i=i.filter(e=>e.statut===this.filtreStatut)),this.filtreType&&(i=i.filter(e=>e.type===this.filtreType)),this.rechercheTexte){let e=this.rechercheTexte.toLowerCase();i=i.filter(r=>r.titre.toLowerCase().includes(e)||r.description.toLowerCase().includes(e))}this.demandesFiltrees.set(i)}annulerDemande(i){confirm("\xCAtes-vous s\xFBr de vouloir annuler cette demande ?")&&console.log("Annulation de la demande:",i.id)}getStatutClass(i){switch(i){case"APPROUVE":return"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800";case"REJETE":return"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800";case"EN_COURS":return"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800";default:return"inline-flex px-3 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"}}getStatutLabel(i){switch(i){case"APPROUVE":return"Approuv\xE9";case"REJETE":return"Rejet\xE9";case"EN_COURS":return"En cours";default:return"En attente"}}getTypeLabel(i){switch(i){case"CONGE":return"Cong\xE9";case"ABSENCE":return"Absence";case"DOCUMENT":return"Document";case"AFFECTATION":return"Affectation";case"NOTE_FRAIS":return"Note de frais";default:return i}}getTypeIcon(i){switch(i){case"CONGE":return{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",path:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"};case"DOCUMENT":return{class:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",path:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"};case"NOTE_FRAIS":return{class:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",path:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"};default:return{class:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",path:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}}}formatDate(i){return new Date(i).toLocaleDateString("fr-FR")}static \u0275fac=function(e){return new(e||o)(y(J),y(q))};static \u0275cmp=F({type:o,selectors:[["app-demandes"]],decls:47,vars:4,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],["routerLink","/demandes/nouvelle","title","Nouvelle demande",1,"flex","items-center","justify-center","w-12","h-12","bg-primary-600","hover:bg-primary-700","rounded-lg","text-white","transition-colors","shadow-md","group","relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","px-3","py-2","bg-gray-900","text-white","text-sm","rounded-lg","opacity-0","group-hover:opacity-100","transition-opacity","whitespace-nowrap","pointer-events-none","z-10"],[1,"absolute","top-full","left-1/2","transform","-translate-x-1/2","w-0","h-0","border-l-4","border-r-4","border-t-4","border-transparent","border-t-gray-900"],[1,"card"],[1,"flex","flex-wrap","gap-4"],[1,"input-field",3,"ngModelChange","ngModel"],["value",""],["value","EN_ATTENTE"],["value","APPROUVE"],["value","REJETE"],["value","EN_COURS"],["value","CONGE"],["value","ABSENCE"],["value","DOCUMENT"],["value","AFFECTATION"],["value","NOTE_FRAIS"],["type","text","placeholder","Rechercher...",1,"input-field",3,"ngModelChange","ngModel"],[1,"space-y-4"],[1,"card","hover:shadow-md","transition-shadow"],[1,"card","text-center","py-12"],[1,"flex","items-start","justify-between"],[1,"flex-1"],[1,"flex","items-start","space-x-4"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"text-lg","font-semibold","text-gray-900"],[1,"text-gray-600","mt-1"],[1,"mt-3","flex","flex-wrap","gap-4","text-sm","text-gray-500"],[1,"mt-3","p-3","bg-blue-50","rounded-lg"],[1,"mt-3"],[1,"flex","items-center","space-x-3"],[1,"text-red-600","hover:text-red-800","transition-colors"],[1,"text-sm","text-blue-900","font-medium"],[1,"text-sm","text-blue-800"],[1,"text-sm","font-medium","text-gray-700","mb-2"],[1,"flex","flex-wrap","gap-2"],[1,"inline-flex","items-center","px-2","py-1","rounded-md","bg-gray-100","text-xs","text-gray-700"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-3","h-3","mr-1"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"text-red-600","hover:text-red-800","transition-colors",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-4","text-lg","font-medium","text-gray-900"],[1,"mt-2","text-gray-500"],[1,"mt-6"],["routerLink","/demandes/nouvelle",1,"btn-primary"]],template:function(e,r){e&1&&(t(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),a(4,"Mes demandes"),n(),t(5,"p",3),a(6,"G\xE9rez vos demandes de cong\xE9s, documents et autres"),n()(),t(7,"a",4),p(),t(8,"svg",5),c(9,"path",6),n(),h(),t(10,"div",7),a(11," Nouvelle demande "),c(12,"div",8),n()()(),t(13,"div",9)(14,"div",10)(15,"div")(16,"select",11),C("ngModelChange",function(d){return E(r.filtreStatut,d)||(r.filtreStatut=d),d}),g("ngModelChange",function(){return r.appliquerFiltres()}),t(17,"option",12),a(18,"Tous les statuts"),n(),t(19,"option",13),a(20,"En attente"),n(),t(21,"option",14),a(22,"Approuv\xE9"),n(),t(23,"option",15),a(24,"Rejet\xE9"),n(),t(25,"option",16),a(26,"En cours"),n()()(),t(27,"div")(28,"select",11),C("ngModelChange",function(d){return E(r.filtreType,d)||(r.filtreType=d),d}),g("ngModelChange",function(){return r.appliquerFiltres()}),t(29,"option",12),a(30,"Tous les types"),n(),t(31,"option",17),a(32,"Cong\xE9"),n(),t(33,"option",18),a(34,"Absence"),n(),t(35,"option",19),a(36,"Document"),n(),t(37,"option",20),a(38,"Affectation"),n(),t(39,"option",21),a(40,"Note de frais"),n()()(),t(41,"div")(42,"input",22),C("ngModelChange",function(d){return E(r.rechercheTexte,d)||(r.rechercheTexte=d),d}),g("ngModelChange",function(){return r.appliquerFiltres()}),n()()()(),t(43,"div",23),T(44,ne,25,15,"div",24,K,!1,ie,10,0,"div",25),n()()),e&2&&(l(16),_("ngModel",r.filtreStatut),l(12),_("ngModel",r.filtreType),l(14),_("ngModel",r.rechercheTexte),l(2),b(r.demandesFiltrees()))},dependencies:[L,j,W,z,G,H,U,B,P,R],encapsulation:2})};export{$ as DemandesComponent};
