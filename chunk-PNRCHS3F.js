import{N as u,a as o,b as c,f as n,j as i}from"./chunk-5P4XIA3I.js";var l=class a{currentUserSubject=new i(null);currentUser$=this.currentUserSubject.asObservable();isAuthenticatedSubject=new i(!1);isAuthenticated$=this.isAuthenticatedSubject.asObservable();mockUsers=[{id:"1",matricule:"EMP001",nom:"Kouassi",prenom:"Konan",email:"Konan.Kouassi@fer.ci",telephone:"+225 07 123 45 67",dateNaissance:"1985-03-15",dateEmbauche:"2020-01-15",typeContrat:"CDI",poste:"Ing\xE9nieur D\xE9veloppement",service:"IT",manager:"Amicha Jean",salaire:85e4,coordonneesBancaires:{banque:"UBA C\xF4te d'Ivoire",iban:"CI08 UB01 2345 6789 0123 4567 89",bic:"UBAFCIDA"},role:"OPERATIONNEL",photo:"assets/images/users/Konan.jpg",statut:"ACTIF"},{id:"2",matricule:"DIR001",nom:"kobenan",prenom:"Fatou",email:"fatou.kobenan@fer.ci",telephone:"+225 07 234 56 78",dateNaissance:"1978-08-22",dateEmbauche:"2015-03-01",typeContrat:"CDI",poste:"Directrice G\xE9n\xE9rale",service:"Direction",manager:void 0,salaire:25e5,coordonneesBancaires:{banque:"SGBCI",iban:"CI08 SG01 2345 6789 0123 4567 89",bic:"SGBCCIDA"},role:"DIRECTION",photo:"assets/images/users/fatou.jpg",statut:"ACTIF"},{id:"3",matricule:"RH001",nom:"jean",prenom:"Kon\xE9",email:"Kon\xE9.jean@fer.ci",telephone:"+225 07 345 67 89",dateNaissance:"1982-12-10",dateEmbauche:"2018-06-15",typeContrat:"CDI",poste:"Responsable RH",service:"Ressources Humaines",manager:"Amicha Kobenan",salaire:12e5,coordonneesBancaires:{banque:"BACI",iban:"CI08 BA01 2345 6789 0123 4567 89",bic:"BACICIDA"},role:"RH",photo:"assets/images/users/Kon\xE9.jpg",statut:"ACTIF"}];constructor(){this.loadAuthState()}loadAuthState(){let t=localStorage.getItem("currentUser"),e=localStorage.getItem("isAuthenticated")==="true";t&&e&&(this.currentUserSubject.next(JSON.parse(t)),this.isAuthenticatedSubject.next(!0))}login(t,e){return new n(r=>{setTimeout(()=>{let s=this.mockUsers.find(m=>m.email.toLowerCase()===t.toLowerCase());s&&e?(this.currentUserSubject.next(s),this.isAuthenticatedSubject.next(!0),localStorage.setItem("currentUser",JSON.stringify(s)),localStorage.setItem("isAuthenticated","true"),r.next(s),r.complete()):r.error("Email ou mot de passe incorrect")},1500)})}logout(){this.currentUserSubject.next(null),this.isAuthenticatedSubject.next(!1),localStorage.removeItem("currentUser"),localStorage.removeItem("isAuthenticated")}getCurrentUser(){return this.currentUserSubject.value}isLoggedIn(){return this.isAuthenticatedSubject.value}hasRole(t){let e=this.getCurrentUser();return e?e.role===t:!1}hasAnyRole(t){let e=this.getCurrentUser();return e?t.includes(e.role):!1}getAvailableUsers(){return this.mockUsers.map(t=>c(o({},t),{salaire:0,coordonneesBancaires:{banque:"",iban:"",bic:""}}))}switchUserRole(t){return new n(e=>{let r=this.mockUsers.find(s=>s.role===t);r?(this.currentUserSubject.next(r),this.isAuthenticatedSubject.next(!0),localStorage.setItem("currentUser",JSON.stringify(r)),localStorage.setItem("isAuthenticated","true"),e.next(r),e.complete()):e.error("Utilisateur non trouv\xE9")})}static \u0275fac=function(e){return new(e||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};export{l as a};
