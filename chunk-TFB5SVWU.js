import{a as z}from"./chunk-DC233EST.js";import{d as N}from"./chunk-K6BAALZU.js";import{a as J}from"./chunk-PNRCHS3F.js";import{c as O,f as P,i as R,j as G,k as q,n as H}from"./chunk-GT7YRUEU.js";import{Ca as T,Lb as L,Qa as k,Ra as D,Sa as A,Ua as h,Va as S,X as w,Xa as e,Y as M,Ya as t,Z as d,Za as m,_ as u,bb as F,cb as f,db as g,ea as v,hb as E,ib as i,jb as c,kb as x,lb as b,mb as I,nb as j,ob as V,sa as a,wa as C}from"./chunk-5P4XIA3I.js";var U=(l,n)=>n.numero,Y=(l,n)=>n.id;function $(l,n){if(l&1&&(e(0,"div",59)(1,"div",60),i(2),t(),e(3,"div"),i(4),t(),e(5,"div"),i(6),t()()),l&2){let r=n.$implicit,o=g(2);E(o.getCongeColorClass(r.statut)),a(2),c(o.getTypeCongeLabel(r.type)),a(2),b("",o.formatDateCourte(r.dateDebut)," - ",o.formatDateCourte(r.dateFin)),a(2),x("",r.nbJours," jour(s)")}}function W(l,n){l&1&&(e(0,"div",58),i(1,"Aucun cong\xE9"),t())}function K(l,n){if(l&1&&(e(0,"div",41)(1,"h3",55),i(2),t(),e(3,"div",56),h(4,$,7,6,"div",57,Y,!1,W,2,0,"div",58),t()()),l&2){let r=n.$implicit,o=g();a(2),c(r.nom),a(2),S(o.getCongesPourMois(r.numero))}}function Q(l,n){if(l&1){let r=F();e(0,"button",70),f("click",function(){w(r);let s=g().$implicit,p=g();return M(p.annulerConge(s))}),i(1," Annuler "),t()}}function X(l,n){l&1&&(e(0,"button",69),i(1," D\xE9tails "),t())}function Z(l,n){if(l&1&&(e(0,"tr",54)(1,"td",61)(2,"div",36)(3,"div"),d(),e(4,"svg",31),m(5,"path",62),t()(),u(),e(6,"div",63)(7,"div",64),i(8),t()()()(),e(9,"td",65),i(10),t(),e(11,"td",65),i(12),t(),e(13,"td",66),i(14),t(),e(15,"td",61)(16,"span"),i(17),t()(),e(18,"td",67),D(19,Q,2,0,"button",68)(20,X,2,0,"button",69),t()()),l&2){let r=n.$implicit,o=g();a(3),E(o.getTypeIcon(r.type).class),a(2),k("d",o.getTypeIcon(r.type).path),a(3),c(o.getTypeCongeLabel(r.type)),a(2),b(" ",o.formatDate(r.dateDebut)," - ",o.formatDate(r.dateFin)," "),a(2),x(" ",r.nbJours," jour(s) "),a(2),x(" ",r.motif||"-"," "),a(2),E(o.getStatutClass(r.statut)),a(),x(" ",o.getStatutLabel(r.statut)," "),a(2),A(r.statut==="EN_ATTENTE"?19:20)}}function ee(l,n){l&1&&(e(0,"tr")(1,"td",71),i(2," Aucun cong\xE9 trouv\xE9 "),t()())}var B=class l{constructor(n,r){this.congeService=n;this.authService=r}conges=v([]);congesFiltres=v([]);statistiques=v(null);anneeSelectionnee=new Date().getFullYear();filtreStatut="";moisAnnee=[{numero:1,nom:"Janvier"},{numero:2,nom:"F\xE9vrier"},{numero:3,nom:"Mars"},{numero:4,nom:"Avril"},{numero:5,nom:"Mai"},{numero:6,nom:"Juin"},{numero:7,nom:"Juillet"},{numero:8,nom:"Ao\xFBt"},{numero:9,nom:"Septembre"},{numero:10,nom:"Octobre"},{numero:11,nom:"Novembre"},{numero:12,nom:"D\xE9cembre"}];ngOnInit(){this.chargerDonnees()}chargerDonnees(){let n=this.authService.getCurrentUser();n&&(this.congeService.getCongesByEmploye(n.id).subscribe(r=>{this.conges.set(r),this.appliquerFiltre()}),this.congeService.getStatistiquesConges(n.id,this.anneeSelectionnee).subscribe(r=>{this.statistiques.set(r)}))}appliquerFiltre(){let n=this.conges();this.filtreStatut&&(n=n.filter(r=>r.statut===this.filtreStatut)),n.sort((r,o)=>new Date(o.dateDebut).getTime()-new Date(r.dateDebut).getTime()),this.congesFiltres.set(n)}changerAnnee(n){this.anneeSelectionnee+=n,this.chargerDonnees()}getCongesPourMois(n){return this.conges().filter(r=>{let o=new Date(r.dateDebut),s=new Date(r.dateFin);return o.getFullYear()===this.anneeSelectionnee&&o.getMonth()+1===n||s.getFullYear()===this.anneeSelectionnee&&s.getMonth()+1===n||o.getFullYear()<=this.anneeSelectionnee&&s.getFullYear()>=this.anneeSelectionnee&&o.getMonth()+1<=n&&s.getMonth()+1>=n})}annulerConge(n){confirm("\xCAtes-vous s\xFBr de vouloir annuler cette demande de cong\xE9 ?")&&console.log("Annulation du cong\xE9:",n.id)}getCongeColorClass(n){switch(n){case"APPROUVE":return"bg-green-100 text-green-800";case"REJETE":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}}getStatutClass(n){switch(n){case"APPROUVE":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800";case"REJETE":return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800";default:return"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800"}}getStatutLabel(n){switch(n){case"APPROUVE":return"Approuv\xE9";case"REJETE":return"Rejet\xE9";default:return"En attente"}}getTypeCongeLabel(n){switch(n){case"CONGE_PAYE":return"Cong\xE9 pay\xE9";case"CONGE_MALADIE":return"Cong\xE9 maladie";case"CONGE_MATERNITE":return"Cong\xE9 maternit\xE9";case"CONGE_SANS_SOLDE":return"Cong\xE9 sans solde";default:return n}}getTypeIcon(n){switch(n){case"CONGE_PAYE":return{class:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",path:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"};case"CONGE_MALADIE":return{class:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",path:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"};default:return{class:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",path:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"}}}formatDate(n){return new Date(n).toLocaleDateString("fr-FR")}formatDateCourte(n){return new Date(n).toLocaleDateString("fr-FR",{month:"short",day:"numeric"})}static \u0275fac=function(r){return new(r||l)(C(z),C(J))};static \u0275cmp=T({type:l,selectors:[["app-conges"]],decls:108,vars:8,consts:[[1,"space-y-6"],[1,"flex","justify-between","items-center"],[1,"text-2xl","font-bold","text-gray-900"],[1,"text-gray-600"],["routerLink","/conges/nouvelle","title","Demander un cong\xE9",1,"flex","items-center","justify-center","w-12","h-12","bg-green-600","hover:bg-green-700","rounded-lg","text-white","transition-colors","shadow-md","group","relative"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"absolute","bottom-full","left-1/2","transform","-translate-x-1/2","mb-2","px-3","py-2","bg-gray-900","text-white","text-sm","rounded-lg","opacity-0","group-hover:opacity-100","transition-opacity","whitespace-nowrap","pointer-events-none","z-10"],[1,"absolute","top-full","left-1/2","transform","-translate-x-1/2","w-0","h-0","border-l-4","border-r-4","border-t-4","border-transparent","border-t-gray-900"],[1,"grid","grid-cols-1","md:grid-cols-4","gap-6"],[1,"card","text-center"],[1,"w-12","h-12","bg-blue-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-blue-600"],[1,"text-sm","text-gray-500"],[1,"w-12","h-12","bg-green-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"text-2xl","font-bold","text-green-600"],[1,"w-12","h-12","bg-orange-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-orange-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-orange-600"],[1,"w-12","h-12","bg-yellow-100","rounded-full","flex","items-center","justify-center","mx-auto","mb-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-6","h-6","text-yellow-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"text-2xl","font-bold","text-yellow-600"],[1,"card"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"flex","justify-between","items-center","mb-6"],[1,"flex","space-x-2"],[1,"btn-secondary",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"px-4","py-2","text-lg","font-medium"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 5l7 7-7 7"],[1,"flex","space-x-4","text-sm"],[1,"flex","items-center"],[1,"w-3","h-3","bg-green-500","rounded","mr-2"],[1,"w-3","h-3","bg-yellow-500","rounded","mr-2"],[1,"w-3","h-3","bg-red-500","rounded","mr-2"],[1,"grid","grid-cols-1","md:grid-cols-3","lg:grid-cols-4","gap-4"],[1,"border","rounded-lg","p-3"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg","font-semibold","text-gray-900"],[1,"input-field","w-48",3,"ngModelChange","ngModel"],["value",""],["value","EN_ATTENTE"],["value","APPROUVE"],["value","REJETE"],[1,"overflow-x-auto"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],[1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"font-medium","text-gray-900","mb-2"],[1,"space-y-1"],[1,"p-2","rounded","text-xs",3,"class"],[1,"text-gray-400","text-xs"],[1,"p-2","rounded","text-xs"],[1,"font-medium"],[1,"px-6","py-4","whitespace-nowrap"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"ml-3"],[1,"text-sm","font-medium","text-gray-900"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-900"],[1,"px-6","py-4","text-sm","text-gray-900","max-w-xs","truncate"],[1,"px-6","py-4","whitespace-nowrap","text-sm","font-medium"],[1,"text-red-600","hover:text-red-900"],[1,"text-primary-600","hover:text-primary-900"],[1,"text-red-600","hover:text-red-900",3,"click"],["colspan","6",1,"px-6","py-4","text-center","text-gray-500"]],template:function(r,o){if(r&1&&(e(0,"div",0)(1,"div",1)(2,"div")(3,"h1",2),i(4,"Gestion des cong\xE9s"),t(),e(5,"p",3),i(6,"Consultez vos cong\xE9s et solde disponible"),t()(),e(7,"a",4),d(),e(8,"svg",5),m(9,"path",6),t(),u(),e(10,"div",7),i(11," Demander un cong\xE9 "),m(12,"div",8),t()()(),e(13,"div",9)(14,"div",10)(15,"div",11),d(),e(16,"svg",12),m(17,"path",6),t()(),u(),e(18,"p",2),i(19),t(),e(20,"p",13),i(21,"Jours autoris\xE9s"),t()(),e(22,"div",10)(23,"div",14),d(),e(24,"svg",15),m(25,"path",16),t()(),u(),e(26,"p",17),i(27),t(),e(28,"p",13),i(29,"Jours restants"),t()(),e(30,"div",10)(31,"div",18),d(),e(32,"svg",19),m(33,"path",20),t()(),u(),e(34,"p",21),i(35),t(),e(36,"p",13),i(37,"Jours pris"),t()(),e(38,"div",10)(39,"div",22),d(),e(40,"svg",23),m(41,"path",24),t()(),u(),e(42,"p",25),i(43),t(),e(44,"p",13),i(45,"En attente"),t()()(),e(46,"div",26)(47,"h2",27),i(48),t(),e(49,"div",28)(50,"div",29)(51,"button",30),f("click",function(){return o.changerAnnee(-1)}),d(),e(52,"svg",31),m(53,"path",32),t()(),u(),e(54,"span",33),i(55),t(),e(56,"button",30),f("click",function(){return o.changerAnnee(1)}),d(),e(57,"svg",31),m(58,"path",34),t()()(),u(),e(59,"div",35)(60,"div",36),m(61,"div",37),e(62,"span"),i(63,"Approuv\xE9"),t()(),e(64,"div",36),m(65,"div",38),e(66,"span"),i(67,"En attente"),t()(),e(68,"div",36),m(69,"div",39),e(70,"span"),i(71,"Rejet\xE9"),t()()()(),e(72,"div",40),h(73,K,7,2,"div",41,U),t()(),e(75,"div",26)(76,"div",42)(77,"h2",43),i(78,"Historique des cong\xE9s"),t(),e(79,"select",44),V("ngModelChange",function(p){return j(o.filtreStatut,p)||(o.filtreStatut=p),p}),f("ngModelChange",function(){return o.appliquerFiltre()}),e(80,"option",45),i(81,"Tous les statuts"),t(),e(82,"option",46),i(83,"En attente"),t(),e(84,"option",47),i(85,"Approuv\xE9"),t(),e(86,"option",48),i(87,"Rejet\xE9"),t()()(),e(88,"div",49)(89,"table",50)(90,"thead",51)(91,"tr")(92,"th",52),i(93,"Type"),t(),e(94,"th",52),i(95,"P\xE9riode"),t(),e(96,"th",52),i(97,"Dur\xE9e"),t(),e(98,"th",52),i(99,"Motif"),t(),e(100,"th",52),i(101,"Statut"),t(),e(102,"th",52),i(103,"Actions"),t()()(),e(104,"tbody",53),h(105,Z,21,12,"tr",54,Y,!1,ee,3,0,"tr"),t()()()()()),r&2){let s,p,_,y;a(19),c(((s=o.statistiques())==null?null:s.totalAutorise)||30),a(8),c(((p=o.statistiques())==null?null:p.totalRestant)||0),a(8),c(((_=o.statistiques())==null?null:_.totalPris)||0),a(8),c(((y=o.statistiques())==null?null:y.congesEnAttente)||0),a(5),x("Calendrier des cong\xE9s ",o.anneeSelectionnee),a(7),c(o.anneeSelectionnee),a(18),S(o.moisAnnee),a(6),I("ngModel",o.filtreStatut),a(26),S(o.congesFiltres())}},dependencies:[L,N,H,G,q,R,O,P],encapsulation:2})};export{B as CongesComponent};
